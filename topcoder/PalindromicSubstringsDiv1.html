<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>Marco likes strings.
In particular, he likes strings that have a lot of palindromic substrings.
For example, he really likes the string "aaa" because it has 6 palindromic substrings: "a" occurs three times, "aa" occurs twice, and "aaa" occurs once.</p>
<br></br>
<p>Right now, Marco has a string <tt>S</tt> composed of lowercase letters and question marks.
You are to reconstruct <tt>S</tt> from the given String[]s <b>S1</b> and <b>S2</b> as follows:
<ol>
<li>Concatenate all elements of <b>S1</b> to make a string <tt>A</tt>.</li>
<li>Concatenate all elements of <b>S2</b> to make a string <tt>B</tt>.</li>
<li>Finally, concatenate <tt>A</tt> and <tt>B</tt> to get <tt>S</tt>.</li>
</ol>
</p>
<br></br>
<p>Marco is going to replace every question mark in <tt>S</tt> with a random lowercase letter (<tt>'a'</tt> - <tt>'z'</tt>).
Return the expected number of palindromic substrings in the resulting string.</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>PalindromicSubstringsDiv1</td></tr><tr><td>Method:</td><td>expectedPalindromes</td></tr><tr><td>Parameters:</td><td>String[], String[]</td></tr><tr><td>Returns:</td><td>double</td></tr><tr><td>Method signature:</td><td>double expectedPalindromes(String[] S1, String[] S2)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>For each question mark, the letter used to replace it is chosen uniformly at random. That is, the probability of choosing any particular letter is 1/26. All random choices are mutually independent.</td></tr><tr><td align="center" valign="top">-</td><td>A palindromic string is a string that reads the same forwards and backwards.</td></tr><tr><td align="center" valign="top">-</td><td>Your return value must have an absolute or a relative error of less than 1e-9.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>S1</b> and <b>S2</b> will contain no more than 50 elements.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>S1</b> and <b>S2</b> will contain no more than 50 characters.</td></tr><tr><td align="center" valign="top">-</td><td><tt>S</tt> will contain at least 1 character.</td></tr><tr><td align="center" valign="top">-</td><td><tt>S</tt> will contain only lowercase letters (<tt>'a'</tt> - <tt>'z'</tt>) and question marks (<tt>'?'</tt>).</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;a&quot;,&quot;a&quot;,&quot;&quot;}</pre></td></tr><tr><td><pre>{&quot;a&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 6.0</pre></td></tr><tr><td><table><tr><td colspan="2">This is the example given in the statement.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;z??&quot;}</pre></td></tr><tr><td><pre>{}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 3.115384615384615</pre></td></tr><tr><td><table><tr><td colspan="2">There are 26^2 = 676 equally likely possibilities for the letters used to replace the question marks.
Here are all possible outcomes:
<ul>
<li>The string "zzz" has 6 palindromic substrings.</li>
<li>Each of the 25 strings "zaz", "zbz", ..., "zyz" has 4 palindromic substrings.</li>
<li>Each of the 25 strings "zza", "zzb", ..., "zzy" has 4 palindromic substrings.</li>
<li>Each of the 25 strings "zaa", "zbb", ..., "zyy" has 4 palindromic substrings.</li>
<li>Each of the remaining 600 possible strings only has the 3 single-letter palindromic substrings.</li>
</ul>
The expected number of palindromic substrings can be computed simply as the average over all 676 possible cases.
Hence, the correct return value is (6 + 75*4 + 600*3) / 676.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;ab&quot;,&quot;c&quot;}</pre></td></tr><tr><td><pre>{&quot;??&quot;,&quot;a?&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 7.315088757396449</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{}</pre></td></tr><tr><td><pre>{&quot;?&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1.0</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{&quot;ab?def&quot;,&quot;?&quot;}</pre></td></tr><tr><td><pre>{&quot;f??a&quot;}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 12.545971779699588</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
